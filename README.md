# Bukit

The Bukit(**Bu**ild **Kit**) is a simple but powerful build tool for C/C++ project. 

By executing a `BUILD` file, the Bukit can deductions relationships of dependency between source files and generates a `Makefile` file. In addtion, it can also watchs all file changes(eg: files are updated/deleted or add new one) and re-generate a new `Makefile`. The generated `Makefile` can be "maked" manually or automatically after the build is complete. 

## Installing
Install and update using pip:
```shell
$ pip install -U git+https://github.com/Zacharier/bukit.git
```
or
```shell
$ git clone https://github.com/Zacharier/bukit.git
$ cd bukit
$ pip install .
```
## A Simple Example
```shell
$ bukit create
```
```c++
// save this as main.cc or any name ended with .cc/.cpp
#include <iostream>

int main() {
    std::cout << "Hello, World" << std::endl;
    return 0;
}
```
```shell
$ bukit run
Hello, World
```

## How to use

### Usage
```shell
usage: bukit [-h] [-v] {create,build,run,clean} ...
```
The command list are as follow:
* `create` create a BUILD file.
* `build` build a full or partial project.
* `run` run an executable file that has been built.
* `clean` clean up files.

You can use `bukit --help` command to view more detailed help information.


### Create
First, make sure to be in the **root directory** of the project.


A simplest method to create a `BUILD` if you only have one source file:

```shell
$ echo "binary('app', ['main.cc'])" > BUILD
```

Another method to create a `BUILD` is automatic generation from a built-in template:

```shell
$ bukit create
```
The optional arguments:
* `--name NAME` specifies the name of artifact(a binary or library) and default to `app` if `--name` was not set.

After the above command is completed, a `BUILD` file was generated and placed to current directory.

### Build
Execute `BUILD` to build project:
```Shell
$ bukit build
```
The optional arguments:
* `--name NAME` specifies the name of artifact, all artifacts will be built if `--name` was not specified.
* `--optimize` whether to optimize code by `-O3`, default to `False` means no optimization(`-O0`).
* `--jobs JOBS` parallels to make.

The `Makefile` was generated during the command is executing, and next the `make` command was automatically executed. Finally, the artifacts (some binaries or libraries) were built and placed into `output` directory.

### Run

Execute the artifact by specifying a name:
```Shell
$ bukit run
```
Build first if it hasn't been built yet. so in addition to supporting all the optional arguments of the `build` command, there are other optional arguments:
* `--args ARGS` passes `ARGS` to the executable artifact specified by `--name`.

The Bukit queries artifacts by `NAME` and run it.

All artifacts will be return if `--name` was not specified. If there is only one executable artifact return by query, this artifact will be run. Otherwise a error will be raised because which will be run is ambiguous, in this case, a `NAME` should be specified explicitly.


### Clean
Clean object files and others Intermediate temporary file:

```Shell
$ bukit clean
```
The optional arguments:
* `--all` whether to clean all files generated by bukit, default to `False`.

## Examples
examples can see in [examples](examples).

## Contribute

## Bug Report

